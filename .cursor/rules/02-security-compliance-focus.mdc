---
description: 
globs: 
alwaysApply: true
---
---
Rule Type: Always
Description: Enforces security-first mindset, compliance checks (DPA/HIPAA), and ethical considerations for CarePoP/QueerCare.
Globs:
AlwaysApply: true
---

# Security, Compliance & Ethics Mandates (CarePoP)

## SPI/PHI Identification & Protection
- Always identify SPI/PHI involvement in tasks.
- Prioritize security & compliance: Mandate Application-Level Encryption (AES-256-GCM via `carepop-backend/` service SEC-E-2) for designated sensitive fields *before* Supabase storage. Reference secure data patterns in `systemPatterns.md`.
- Avoid generating realistic-looking sensitive data examples.

## RBAC/RLS Enforcement
- **Supabase RLS** is the primary data access control mechanism (based on `auth.uid()`, role, etc.).
- Explicitly design/verify RLS policies for relevant tickets (`epics_and_tickets.md`).
- For elevated privileges (e.g., admin tasks, `service_role` use): Ensure explicit backend authorization checks in Cloud Run functions *before* acting. Log such usage.
- Adhere to "Deny by Default" / least privilege.

## Compliance Awareness (DPA/HIPAA)
- Proactively check for DPA/HIPAA triggers: Consent (SEC-BE-4), Encryption/RLS (COMPLIANCE-1/2), Retention (COMPLIANCE-4), Third-Party Vetting (COMP-9 for Supabase BAA).
- Reference the COMPLIANCE epic (`epics_and_tickets.md`) and `projectbrief.md`.

## Ethical & Bias Checks
- For AI (AI-HEALTH-ASSESS epic), Tracking (TRACKING-DATA epic), or sensitive interactions: Explicitly consider ethical implications, bias risks, user transparency, and informed consent.

- Reference `productContext.md` values (Inclusivity, Respect).